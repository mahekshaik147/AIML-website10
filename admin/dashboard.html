<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - AIML Department</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <img src="../guru.jpg" alt="Logo" class="sidebar-logo">
      <h2>AIML Admin</h2>
    </div>

    <nav class="sidebar-nav">
      <a href="#dashboard" class="nav-item active" data-section="dashboard">
        <i class="fa-solid fa-chart-line"></i>
        <span>Dashboard</span>
      </a>
      <a href="#leaders" class="nav-item" data-section="leaders">
        <i class="fa-solid fa-user-tie"></i>
        <span>Leaders</span>
      </a>
      <a href="#faculty" class="nav-item" data-section="faculty">
        <i class="fa-solid fa-chalkboard-user"></i>
        <span>Faculty</span>
      </a>
      <a href="#students" class="nav-item" data-section="students">
        <i class="fa-solid fa-user-graduate"></i>
        <span>Students</span>
      </a>
      <a href="#activities" class="nav-item" data-section="activities">
        <i class="fa-solid fa-calendar-days"></i>
        <span>Activities</span>
      </a>
      <a href="#achievements" class="nav-item" data-section="achievements">
        <i class="fa-solid fa-trophy"></i>
        <span>Achievements</span>
      </a>
      <a href="#gallery" class="nav-item" data-section="gallery">
        <i class="fa-solid fa-images"></i>
        <span>Gallery</span>
      </a>
      <a href="#content" class="nav-item" data-section="content">
        <i class="fa-solid fa-file-lines"></i>
        <span>Content</span>
      </a>
      <a href="#contact" class="nav-item" data-section="contact">
        <i class="fa-solid fa-address-card"></i>
        <span>Contact</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <button class="logout-btn" id="logoutBtn">
        <i class="fa-solid fa-arrow-right-from-bracket"></i>
        <span>Logout</span>
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="top-header">
      <button class="menu-toggle" id="menuToggle">
        <i class="fa-solid fa-bars"></i>
      </button>
      <h1 id="pageTitle">Dashboard</h1>
      <div class="header-actions">
        <button class="header-btn" id="viewWebsite" title="View Website">
          <i class="fa-solid fa-globe"></i>
        </button>
        <div class="admin-profile">
          <img src="../guru.jpg" alt="Admin">
          <span id="adminName">Admin</span>
        </div>
      </div>
    </header>

    <!-- Dashboard Section -->
    <section id="dashboardSection" class="content-section active">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <i class="fa-solid fa-user-graduate"></i>
          </div>
          <div class="stat-info">
            <h3>420</h3>
            <p>Total Students</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
            <i class="fa-solid fa-chalkboard-user"></i>
          </div>
          <div class="stat-info">
            <h3>24</h3>
            <p>Faculty Members</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
            <i class="fa-solid fa-calendar-days"></i>
          </div>
          <div class="stat-info">
            <h3>15</h3>
            <p>Activities</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
            <i class="fa-solid fa-trophy"></i>
          </div>
          <div class="stat-info">
            <h3>8</h3>
            <p>Achievements</p>
          </div>
        </div>
      </div>

      <div class="dashboard-grid">
        <div class="dashboard-card">
          <h3>Recent Activities</h3>
          <div class="activity-list">
            <div class="activity-item">
              <i class="fa-solid fa-plus-circle"></i>
              <span>New faculty member added</span>
              <small>2 hours ago</small>
            </div>
            <div class="activity-item">
              <i class="fa-solid fa-edit"></i>
              <span>Content updated</span>
              <small>5 hours ago</small>
            </div>
            <div class="activity-item">
              <i class="fa-solid fa-image"></i>
              <span>Gallery image uploaded</span>
              <small>1 day ago</small>
            </div>
          </div>
        </div>

        <div class="dashboard-card">
          <h3>Quick Actions</h3>
          <div class="quick-actions">
            <button class="action-btn" onclick="switchSection('faculty')">
              <i class="fa-solid fa-user-plus"></i>
              Add Faculty
            </button>
            <button class="action-btn" onclick="switchSection('activities')">
              <i class="fa-solid fa-calendar-plus"></i>
              Add Activity
            </button>
            <button class="action-btn" onclick="switchSection('gallery')">
              <i class="fa-solid fa-image"></i>
              Upload Image
            </button>
            <button class="action-btn" onclick="switchSection('content')">
              <i class="fa-solid fa-pen"></i>
              Edit Content
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Leaders Section -->
    <section id="leadersSection" class="content-section">
      <div class="section-header">
        <h2>Leadership Management</h2>
        <button class="btn-primary" id="addLeaderBtn">
          <i class="fa-solid fa-plus"></i> Add Leader
        </button>
      </div>

      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>Photo</th>
              <th>Name</th>
              <th>Position</th>
              <th>Display Order</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="leadersTableBody">
            <tr>
              <td colspan="5" style="text-align: center; padding: 20px;">Loading leaders...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Faculty Section -->
    <section id="facultySection" class="content-section">
      <div class="section-header">
        <h2>Faculty Management</h2>
        <button class="btn-primary" id="addFacultyBtn">
          <i class="fa-solid fa-plus"></i> Add Faculty
        </button>
      </div>

      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>Photo</th>
              <th>Name</th>
              <th>Role</th>
              <th>Department</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="facultyTableBody">
            <tr>
              <td><img src="../assets/img/faculty/hod-aiml.jpg" alt="Faculty" class="table-img"></td>
              <td>Dr. Dayanand</td>
              <td>Head of Department</td>
              <td>AIML</td>
              <td>
                <button class="btn-icon btn-edit" title="Edit">
                  <i class="fa-solid fa-pen"></i>
                </button>
                <button class="btn-icon btn-delete" title="Delete">
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>
            </tr>
            <tr>
              <td><img src="../assets/img/faculty/jasmineet-kaur.jpg" alt="Faculty" class="table-img"></td>
              <td>Dr. Jasmineet Kaur</td>
              <td>Assistant Professor</td>
              <td>AIML</td>
              <td>
                <button class="btn-icon btn-edit" title="Edit">
                  <i class="fa-solid fa-pen"></i>
                </button>
                <button class="btn-icon btn-delete" title="Delete">
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Students Section -->
    <section id="studentsSection" class="content-section">
      <div class="section-header">
        <h2>Student Management</h2>
        <button class="btn-primary" id="addStudentBtn">
          <i class="fa-solid fa-plus"></i> Add Student
        </button>
      </div>

      <div class="card-grid" style="margin-bottom: 30px;">
        <div class="info-card">
          <h3>Upload Student Lists</h3>
          <p>Upload PDF files for each academic year</p>
          <button class="btn-secondary" onclick="document.getElementById('studentPdfUpload').click()">
            <i class="fa-solid fa-file-pdf"></i> Upload PDF
          </button>
          <input type="file" id="studentPdfUpload" accept=".pdf" hidden>
        </div>

        <div class="info-card">
          <h3>Current Toppers</h3>
          <p>View and manage top performing students</p>
          <button class="btn-secondary" onclick="switchSection('students')">
            <i class="fa-solid fa-star"></i> View All Students
          </button>
        </div>
      </div>

      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>Photo</th>
              <th>Name</th>
              <th>Roll Number</th>
              <th>Year</th>
              <th>CGPA</th>
              <th>Topper</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="studentsTableBody">
            <tr>
              <td colspan="7" style="text-align: center; padding: 20px;">Loading students...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Activities Section -->
    <section id="activitiesSection" class="content-section">
      <div class="section-header">
        <h2>Activities Management</h2>
        <button class="btn-primary" id="addActivityBtn">
          <i class="fa-solid fa-plus"></i> Add Activity
        </button>
      </div>

      <div class="card-grid">
        <div class="activity-card">
          <img src="../assets/img 3.jpeg" alt="Activity">
          <div class="card-content">
            <h3>Deep Learning Workshop</h3>
            <p>Hands-on sessions on CNNs and transfer learning.</p>
            <div class="card-actions">
              <button class="btn-icon btn-edit">
                <i class="fa-solid fa-pen"></i>
              </button>
              <button class="btn-icon btn-delete">
                <i class="fa-solid fa-trash"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="activity-card">
          <img src="../assets/img.jpeg" alt="Activity">
          <div class="card-content">
            <h3>AI Hackathon</h3>
            <p>48-hour challenge building end-to-end ML solutions.</p>
            <div class="card-actions">
              <button class="btn-icon btn-edit">
                <i class="fa-solid fa-pen"></i>
              </button>
              <button class="btn-icon btn-delete">
                <i class="fa-solid fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Achievements Section -->
    <section id="achievementsSection" class="content-section">
      <div class="section-header">
        <h2>Achievements Management</h2>
        <button class="btn-primary" id="addAchievementBtn">
          <i class="fa-solid fa-plus"></i> Add Achievement
        </button>
      </div>

      <div class="gallery-grid">
        <div class="gallery-item">
          <img src="../assets/img 4.jpeg" alt="Achievement">
          <div class="gallery-overlay">
            <button class="btn-icon btn-delete">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
        <div class="gallery-item">
          <img src="../assets/img 5.jpeg" alt="Achievement">
          <div class="gallery-overlay">
            <button class="btn-icon btn-delete">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallerySection" class="content-section">
      <div class="section-header">
        <h2>Gallery Management</h2>
        <button class="btn-primary" id="uploadGalleryBtn">
          <i class="fa-solid fa-upload"></i> Upload Image
        </button>
      </div>

      <div class="gallery-grid">
        <div class="gallery-item">
          <img src="../assets/img/gallery/department-photo-1.jpg" alt="Gallery">
          <div class="gallery-overlay">
            <button class="btn-icon btn-delete">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Content Section -->
    <section id="contentSection" class="content-section">
      <div class="section-header">
        <h2>Content Management</h2>
        <button class="btn-primary" id="saveContentBtn">
          <i class="fa-solid fa-save"></i> Save Changes
        </button>
      </div>

      <div class="form-card">
        <h3>About Us Section</h3>
        <div class="form-group">
          <label>Tagline</label>
          <input type="text" class="form-input" value="Empowering Intelligence Through Innovation.">
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea class="form-textarea" rows="4">Artificial Intelligence (AI) and Machine Learning (ML) Course is rapidly growing fields in computer science...</textarea>
        </div>
      </div>

      <div class="form-card">
        <h3>Mission & Vision</h3>
        <div class="form-group">
          <label>Vision Statement</label>
          <textarea class="form-textarea" rows="3">To be a premier center of excellence in Artificial Intelligence...</textarea>
        </div>
        <div class="form-group">
          <label>Mission Statement</label>
          <textarea class="form-textarea" rows="5">The mission of the Department of Artificial Intelligence...</textarea>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contactSection" class="content-section">
      <div class="section-header">
        <h2>Contact Management</h2>
        <div class="header-actions-group">
          <button class="btn-secondary" id="refreshMessagesBtn" title="Refresh Messages">
            <i class="fa-solid fa-sync-alt"></i> Refresh
          </button>
          <button class="btn-primary" id="saveContactInfoBtn">
            <i class="fa-solid fa-save"></i> Save Contact Info
          </button>
        </div>
      </div>

      <!-- Contact Info Form -->
      <div class="form-card" style="margin-bottom: 30px;">
        <h3>Contact Information</h3>
        <p style="color: #666; margin-bottom: 20px;">Manage the contact details displayed on the website.</p>
        <div class="form-grid">
          <div class="form-group">
            <label>Address *</label>
            <textarea class="form-textarea" id="contactAddress" rows="2" required placeholder="Guru Nanak Dev Engineering College Mailoor Road, Bidar, KA-585403"></textarea>
          </div>
          <div class="form-group">
            <label>Phone *</label>
            <input type="text" class="form-input" id="contactPhone" required placeholder="+918482-226949">
          </div>
          <div class="form-group">
            <label>Email *</label>
            <input type="email" class="form-input" id="contactEmail" required placeholder="principalgndecb@gmail.com">
          </div>
          <div class="form-group">
            <label>Alternate Email</label>
            <input type="email" class="form-input" id="contactAlternateEmail" placeholder="principal@gndecb.ac.in">
          </div>
          <div class="form-group">
            <label>Website</label>
            <input type="url" class="form-input" id="contactWebsite" placeholder="https://www.gndecb.ac.in">
          </div>
          <div class="form-group">
            <label>Office Hours</label>
            <input type="text" class="form-input" id="contactOfficeHours" placeholder="Monday - Friday: 9:00 AM - 5:00 PM">
          </div>
        </div>
      </div>

      <!-- Messages Section -->
      <div class="messages-header">
        <h3>Contact Messages</h3>
        <div class="message-filters">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="new">New</button>
          <button class="filter-btn" data-filter="read">Read</button>
          <button class="filter-btn" data-filter="replied">Replied</button>
          <button class="filter-btn" data-filter="archived">Archived</button>
        </div>
      </div>

      <div class="messages-container" id="messagesContainer">
        <div class="messages-list" id="messagesList">
          <div style="text-align: center; padding: 40px; color: #666;">
            <i class="fa-solid fa-envelope" style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
            <p>Loading messages...</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal for Add/Edit Faculty -->
  <div id="facultyModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Add Faculty Member</h3>
        <button class="modal-close" id="closeFacultyModal">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="facultyForm">
          <div class="form-group">
            <label>Full Name *</label>
            <input type="text" class="form-input" id="facultyName" required>
          </div>
          <div class="form-group">
            <label>Role *</label>
            <select class="form-input" id="facultyRole" required>
              <option value="">Select Role</option>
              <option value="HOD">Head of Department</option>
              <option value="Professor">Professor</option>
              <option value="Assistant Professor">Assistant Professor</option>
            </select>
          </div>
          <div class="form-group">
            <label>Photo</label>
            <input type="file" class="form-input" id="facultyPhoto" accept="image/*">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-secondary" id="cancelFacultyBtn">Cancel</button>
            <button type="submit" class="btn-primary">Save Faculty</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal for Add Activity -->
  <div id="activityModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Add Activity</h3>
        <button class="modal-close" id="closeActivityModal">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="activityForm">
          <div class="form-group">
            <label>Activity Title *</label>
            <input type="text" class="form-input" id="activityTitle" required placeholder="e.g., Deep Learning Workshop">
          </div>
          <div class="form-group">
            <label>Description *</label>
            <textarea class="form-textarea" id="activityDescription" rows="3" required placeholder="Brief description of the activity"></textarea>
          </div>
          <div class="form-group">
            <label>Activity Image *</label>
            <input type="file" class="form-input" id="activityImage" accept="image/*" required>
            <small style="color: #666; font-size: 12px;">Recommended size: 800x600px</small>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-secondary" id="cancelActivityBtn">Cancel</button>
            <button type="submit" class="btn-primary">Save Activity</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal for Add Achievement -->
  <div id="achievementModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Add Achievement</h3>
        <button class="modal-close" id="closeAchievementModal">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="achievementForm">
          <div class="form-group">
            <label>Achievement Title (Optional)</label>
            <input type="text" class="form-input" id="achievementTitle" placeholder="e.g., Smart India Hackathon Winners">
          </div>
          <div class="form-group">
            <label>Achievement Image *</label>
            <input type="file" class="form-input" id="achievementImage" accept="image/*" required>
            <small style="color: #666; font-size: 12px;">Recommended size: 600x400px</small>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-secondary" id="cancelAchievementBtn">Cancel</button>
            <button type="submit" class="btn-primary">Save Achievement</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal for Add/Edit Leader -->
  <div id="leaderModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="leaderModalTitle">Add Leader</h3>
        <button class="modal-close" id="closeLeaderModal">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="leaderForm">
          <div class="form-group">
            <label>Full Name *</label>
            <input type="text" class="form-input" id="leaderName" required placeholder="e.g., Dr. Sardar Balbir Singh">
          </div>
          <div class="form-group">
            <label>Position *</label>
            <input type="text" class="form-input" id="leaderPosition" required placeholder="e.g., Chairman, Principal, Vice Chairperson">
          </div>
          <div class="form-group">
            <label>Display Order *</label>
            <input type="number" class="form-input" id="leaderDisplayOrder" required min="1" value="1" placeholder="1">
            <small style="color: #666; font-size: 12px;">Lower numbers appear first</small>
          </div>
          <div class="form-group">
            <label>Photo *</label>
            <input type="file" class="form-input" id="leaderPhoto" accept="image/*">
            <small style="color: #666; font-size: 12px;">Recommended size: 400x500px</small>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-secondary" id="cancelLeaderBtn">Cancel</button>
            <button type="submit" class="btn-primary">Save Leader</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal for Add/Edit Student -->
  <div id="studentModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="studentModalTitle">Add Student</h3>
        <button class="modal-close" id="closeStudentModal">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="studentForm">
          <div class="form-group">
            <label>Full Name *</label>
            <input type="text" class="form-input" id="studentName" required placeholder="e.g., PRACHI KULKARNI">
          </div>
          <div class="form-group">
            <label>Roll Number *</label>
            <input type="text" class="form-input" id="studentRollNumber" required placeholder="e.g., 3GN23AI036">
          </div>
          <div class="form-group">
            <label>Year *</label>
            <select class="form-input" id="studentYear" required>
              <option value="">Select Year</option>
              <option value="1">First Year</option>
              <option value="2">Second Year</option>
              <option value="3">Third Year</option>
              <option value="4">Fourth Year</option>
            </select>
          </div>
          <div class="form-group">
            <label>Semester</label>
            <select class="form-input" id="studentSemester">
              <option value="">Select Semester</option>
              <option value="1">1st Semester</option>
              <option value="2">2nd Semester</option>
              <option value="3">3rd Semester</option>
              <option value="4">4th Semester</option>
              <option value="5">5th Semester</option>
              <option value="6">6th Semester</option>
              <option value="7">7th Semester</option>
              <option value="8">8th Semester</option>
            </select>
          </div>
          <div class="form-group">
            <label>CGPA *</label>
            <input type="number" class="form-input" id="studentCGPA" required min="0" max="10" step="0.01" placeholder="e.g., 9.5">
          </div>
          <div class="form-group">
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" id="studentIsTopper" style="width: auto; margin: 0;">
              <span>Mark as Topper (Top 3 students shown on homepage)</span>
            </label>
            <small style="color: #666; font-size: 12px; display: block; margin-top: 4px;">Only students marked as toppers will appear on the website's topper section</small>
          </div>
          <div class="form-group">
            <label>Photo (Optional)</label>
            <input type="file" class="form-input" id="studentPhoto" accept="image/*">
            <small style="color: #666; font-size: 12px;">Recommended size: 400x400px</small>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-secondary" id="cancelStudentBtn">Cancel</button>
            <button type="submit" class="btn-primary">Save Student</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal for View Message -->
  <div id="messageModal" class="modal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3 id="messageModalTitle">Message Details</h3>
        <button class="modal-close" id="closeMessageModal">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div id="messageDetails" class="message-details">
          <!-- Message details will be populated here -->
        </div>
        <div class="form-card" style="margin-top: 20px;">
          <h4>Admin Notes</h4>
          <textarea class="form-textarea" id="messageAdminNotes" rows="3" placeholder="Add internal notes about this message..."></textarea>
          <div class="message-actions" style="margin-top: 16px; display: flex; gap: 10px; flex-wrap: wrap;">
            <button class="btn-secondary" id="markAsReadBtn">Mark as Read</button>
            <button class="btn-secondary" id="markAsRepliedBtn">Mark as Replied</button>
            <button class="btn-secondary" id="archiveMessageBtn">Archive</button>
            <button class="btn-primary" id="saveMessageNotesBtn">Save Notes</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Supabase JS Library -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase-config.js"></script>
  <script src="database.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
